<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>{% block title %}Marius Magda{% endblock %}</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
        <script src="{{ asset('js/alertifyjs/alertify.js') }}"></script>
        <link rel="stylesheet" href="{{ asset('js/alertifyjs/css/alertify.css') }}"/>
        {% block stylesheets %}
        {% endblock %}
        {% block javascripts %}
        {% endblock %}
    </head>
    <body>
        {% if app.user %}
            <button class="btn btn-dark position-absolute top-50 start-0 translate-middle fw-bolder " type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
                <h1>>></h1>
            </button>

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
                <div class="offcanvas-header">
                    <h2 class="offcanvas-title" id="offcanvasExampleLabel">Perfil</h2>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    
                    <img
                            src="{{ asset('img/') }}{{ app.user.foto }}"
                            class="rounded-circle w-100 border border-dark"
                            height="330"
                            alt="Foto de: {{ app.user.nombre }}"
                            loading="lazy"
                            />
                    <a class="btn btn-dark w-100 my-1">{{ app.user.nombre }} {{ app.user.apellidos }}</a>
                    <a class="btn btn-outline-secondary w-100" href="{{ path('app_logout') }}">Cerrar sesión</a>
                    <hr>
                    <div class="d-flex justify-content-center align-items-center ">
                        <div class="row">
                        <a class="btn btn-secondary w-100 my-2" href="/clientes">Clientes</a>
                        <a class="btn btn-secondary w-100 my-2" href="/incidencias">Incidencias</a>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <button class="btn btn-dark position-absolute top-50 start-0 translate-middle fw-bolder " type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
                <h1>>></h1>
            </button>

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasExampleLabel">Iniciar Sesíon y Registro</h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="d-flex align-items-center justify-content-center ">
                        <div>
                            <a class="btn btn-dark w-100" href="{{ path('app_login') }}">Iniciar sesión</a><br>
                            <a class="btn btn-dark my-2 w-100" href="{{ path('app_registro') }}">Registrarse</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
        {% for message in app.flashes('aviso') %}
            <script>
                {{ message|raw }}
            </script>
        {% endfor %}
        {% block body %}{% endblock %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>
